<!DOCTYPE html>
<html lang="es" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión - Centro de Salud</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        /* Estilos para hacer el navbar más compacto */
        .navbar {
            padding: 0.3rem 1rem;
            font-size: 0.85rem;
        }
        
        .navbar-brand {
            font-size: 1rem;
            padding: 0.25rem 0;
        }
        
        .navbar-brand i {
            font-size: 1.2rem;
        }
        
        .nav-link {
            padding: 0.4rem 0.6rem;
            font-size: 0.85rem;
        }
        
        .dropdown-menu {
            font-size: 0.85rem;
        }
        
        .dropdown-item {
            padding: 0.4rem 1rem;
        }
        /* Botón flotante de configuración */
        .theme-toggle-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--bs-primary);
            color: white;
            border: none;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        .theme-toggle-btn:hover {
            transform: scale(1.1);
            transition: transform 0.2s;
        }
        .theme-menu {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 10px;
            display: none;
            z-index: 999;
        }
        .theme-menu.show {
            display: block;
        }
        [data-bs-theme="dark"] .theme-menu {
            background: #212529;
        }
        /* Estilos para los cards del dashboard */
        .dashboard-card {
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            height: 100%;
        }
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        .dashboard-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        /* Estilos adicionales para notificaciones */
        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #dc3545;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.7rem;
            font-weight: bold;
        }
        .notification-dropdown {
            min-width: 350px;
            max-height: 400px;
            overflow-y: auto;
        }
        .notification-item {
            padding: 10px;
            border-bottom: 1px solid #dee2e6;
            cursor: pointer;
        }
        .notification-item:hover {
            background-color: #f8f9fa;
        }
        [data-bs-theme="dark"] .notification-item:hover {
            background-color: #343a40;
        }
        /* Estilos para el calendario */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        .calendar-day {
            border: 1px solid #dee2e6;
            padding: 10px;
            min-height: 100px;
            background-color: white;
        }
        [data-bs-theme="dark"] .calendar-day {
            background-color: #212529;
            border-color: #495057;
        }
        .calendar-day-header {
            font-weight: bold;
            text-align: center;
            padding: 10px;
            background-color: #e9ecef;
        }
        [data-bs-theme="dark"] .calendar-day-header {
            background-color: #343a40;
        }
        .calendar-event {
            font-size: 0.75rem;
            padding: 2px 5px;
            margin: 2px 0;
            border-radius: 3px;
            background-color: #0d6efd;
            color: white;
        }
        /* Estilos para gráficos simples */
        .chart-bar {
            background-color: #0d6efd;
            height: 30px;
            margin: 5px 0;
            border-radius: 3px;
            display: flex;
            align-items: center;
            padding-left: 10px;
            color: white;
        }
        .stat-card {
            border-left: 4px solid;
        }
        .stat-card.danger {
            border-color: #dc3545;
        }
        .stat-card.warning {
            border-color: #ffc107;
        }
        .stat-card.success {
            border-color: #198754;
        }
        .stat-card.info {
            border-color: #0dcaf0;
        }
    </style>
</head>
<body>
    <!-- Navbar reorganizado con logo a la izquierda, menús desplegables en el centro, y usuario/salir a la derecha -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <!-- Logo y nombre del sistema -->
            <a class="navbar-brand d-flex align-items-center" href="#" onclick="showView('dashboard')">
                <i class="bi bi-hospital me-2 fs-4"></i>
                <span>Centro de Salud</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <!-- Menús de gestión (centro) -->
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!-- Gestión de Pacientes -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Gestión de Pacientes
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-pacientes')">Ver Pacientes</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('insertar-paciente')">Insertar Paciente</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('buscar-historial')">Buscar Historial</a></li>
                            <!-- Agregadas opciones de alergias y contactos de emergencia -->
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-alergias')">Ver Alergias</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-contactos-emergencia')">Contactos de Emergencia</a></li>
                        </ul>
                    </li>

                    <!-- Gestión de Turnos -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Gestión de Turnos
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-turnos')">Ver Turnos</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('agendar-turno')">Agendar Turno</a></li>
                            <!-- Agregado Calendario de Turnos -->
                            <li><a class="dropdown-item" href="#" onclick="showView('calendario-turnos')">Calendario de Turnos</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('listar-turnos-dia')">Turnos por Día</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('verificar-disponibilidad')">Verificar Disponibilidad</a></li>
                        </ul>
                    </li>

                    <!-- Nuevo menú de Gestión de Consultas -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Gestión de Consultas
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-consultas')">Ver Consultas</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('registrar-consulta')">Registrar Consulta</a></li>
                            <!-- Agregado enlace a "Ver Recetas" -->
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-recetas')">Ver Recetas</a></li>
                            <!-- Agregado enlace a "Ver Tipos de Consultas" -->
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-tipos-consultas')">Ver Tipos de Consultas</a></li>
                        </ul>
                    </li>

                    <!-- Nuevo menú de Gestión de Profesionales -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Gestión de Profesionales
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-profesionales')">Ver Profesionales</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('insertar-profesional')">Insertar Profesional</a></li>
                            <!-- Agregado Ver Especialidades -->
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-especialidades')">Ver Especialidades</a></li>
                        </ul>
                    </li>

                    <!-- Nuevo menú de Órdenes de Laboratorio -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Órdenes de Laboratorio
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-ordenes')">Ver Órdenes</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('crear-orden')">Crear Orden</a></li>
                        </ul>
                    </li>

                    <!-- Gestión de Farmacia -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Farmacia
                        </a>
                        <ul class="dropdown-menu">
                            <!-- Agregada opción "Ver Medicamentos" -->
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-medicamentos')">Ver Medicamentos</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('stock-minimo')">Stock Mínimo</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('actualizar-stock')">Actualizar Stock</a></li>
                        </ul>
                    </li>

                    <!-- Nuevo menú de Facturación -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Facturación
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-facturas')">Ver Facturas</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('crear-factura')">Crear Factura</a></li>
                        </ul>
                    </li>
                    
                    <!-- Gestión de Usuarios para admin -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Gestión de Usuarios
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="showView('ver-usuarios')">Ver Usuarios</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('insertar-usuario')">Insertar Usuario</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showView('gestionar-roles')">Gestionar Roles</a></li>
                        </ul>
                    </li>
                </ul>

                <!-- Agregado sistema de notificaciones -->
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link position-relative" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-bell-fill fs-5"></i>
                            <span class="notification-badge">3</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end notification-dropdown">
                            <li class="dropdown-header">Notificaciones</li>
                            <li><hr class="dropdown-divider"></li>
                            <li class="notification-item">
                                <div class="d-flex align-items-start">
                                    <i class="bi bi-exclamation-triangle-fill text-danger me-2"></i>
                                    <div>
                                        <strong>Stock Crítico</strong>
                                        <p class="mb-0 small">Paracetamol 500mg - Solo quedan 5 unidades</p>
                                        <small class="text-muted">Hace 2 horas</small>
                                    </div>
                                </div>
                            </li>
                            <li class="notification-item">
                                <div class="d-flex align-items-start">
                                    <i class="bi bi-calendar-check text-info me-2"></i>
                                    <div>
                                        <strong>Turno Próximo</strong>
                                        <p class="mb-0 small">Juan Pérez - Hoy 15:00 hs</p>
                                        <small class="text-muted">Hace 1 hora</small>
                                    </div>
                                </div>
                            </li>
                            <li class="notification-item">
                                <div class="d-flex align-items-start">
                                    <i class="bi bi-clipboard2-data text-warning me-2"></i>
                                    <div>
                                        <strong>Resultado Pendiente</strong>
                                        <p class="mb-0 small">Orden #123 - Análisis de sangre</p>
                                        <small class="text-muted">Hace 3 horas</small>
                                    </div>
                                </div>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li class="text-center">
                                <a class="dropdown-item" href="#">Ver todas las notificaciones</a>
                            </li>
                        </ul>
                    </li>
                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-person-circle me-1"></i> Administrador
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i> Mi Perfil</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right me-2"></i> Salir</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Eliminado el sidebar lateral, ahora todo el contenido ocupa el ancho completo -->
    <div class="container-fluid mt-4">
        <main class="px-md-4">
            
            <!-- Dashboard mejorado con estadísticas -->
            <div id="view-dashboard" class="content-view">
                <div class="pt-4 pb-3">
                    <h1 class="display-4">Hola, Administrador</h1>
                    <p class="lead text-muted">Bienvenido al Sistema de Gestión del Centro de Salud</p>
                </div>

                <!-- Estadísticas rápidas -->
                <div class="row g-3 mb-4">
                    <div class="col-md-3">
                        <div class="card stat-card danger">
                            <div class="card-body">
                                <h6 class="text-muted">Stock Crítico</h6>
                                <h2 class="mb-0">3</h2>
                                <small class="text-danger"><i class="bi bi-exclamation-triangle-fill"></i> Requiere atención</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card stat-card info">
                            <div class="card-body">
                                <h6 class="text-muted">Turnos Hoy</h6>
                                <h2 class="mb-0">12</h2>
                                <small class="text-info"><i class="bi bi-calendar-check"></i> 8 confirmados</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card stat-card warning">
                            <div class="card-body">
                                <h6 class="text-muted">Resultados Pendientes</h6>
                                <h2 class="mb-0">5</h2>
                                <small class="text-warning"><i class="bi bi-clipboard2-data"></i> Órdenes de lab.</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card stat-card success">
                            <div class="card-body">
                                <h6 class="text-muted">Pacientes Activos</h6>
                                <h2 class="mb-0">248</h2>
                                <small class="text-success"><i class="bi bi-people-fill"></i> Este mes</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gráficos y datos -->
                <div class="row g-4 mb-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Turnos por Mes (Últimos 6 meses)</h5>
                            </div>
                            <div class="card-body">
                                <div class="chart-bar" style="width: 85%;">Enero: 85</div>
                                <div class="chart-bar" style="width: 92%; background-color: #198754;">Febrero: 92</div>
                                <div class="chart-bar" style="width: 78%;">Marzo: 78</div>
                                <div class="chart-bar" style="width: 95%; background-color: #198754;">Abril: 95</div>
                                <div class="chart-bar" style="width: 88%;">Mayo: 88</div>
                                <div class="chart-bar" style="width: 90%;">Junio: 90</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">Consultas Más Frecuentes</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Control de rutina
                                        <span class="badge bg-primary rounded-pill">45</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Dolor de cabeza
                                        <span class="badge bg-primary rounded-pill">32</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Fiebre
                                        <span class="badge bg-primary rounded-pill">28</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Dolor abdominal
                                        <span class="badge bg-primary rounded-pill">24</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Tos y resfriado
                                        <span class="badge bg-primary rounded-pill">21</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cards de navegación -->
                <h3 class="mb-3">Módulos del Sistema</h3>
                <div class="row g-4 mt-2">
                    <!-- Card Gestión de Pacientes -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card dashboard-card text-center" onclick="showView('ver-pacientes')">
                            <div class="card-body p-4">
                                <i class="bi bi-people-fill text-primary dashboard-icon"></i>
                                <h4 class="card-title">Gestión de Pacientes</h4>
                                <p class="card-text text-muted">Administrar pacientes, historiales y consultas</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card Gestión de Turnos -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card dashboard-card text-center" onclick="showView('ver-turnos')">
                            <div class="card-body p-4">
                                <i class="bi bi-calendar-check-fill text-success dashboard-icon"></i>
                                <h4 class="card-title">Gestión de Turnos</h4>
                                <p class="card-text text-muted">Agendar, ver y gestionar turnos</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card Gestión de Consultas -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card dashboard-card text-center" onclick="showView('ver-consultas')">
                            <div class="card-body p-4">
                                <i class="bi bi-clipboard2-pulse-fill text-info dashboard-icon"></i>
                                <h4 class="card-title">Gestión de Consultas</h4>
                                <p class="card-text text-muted">Registrar y ver consultas médicas</p>
                            </div>
                        </div>
                    </div>

                    <!-- Nuevo card para Gestión de Profesionales -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card dashboard-card text-center" onclick="showView('ver-profesionales')">
                            <div class="card-body p-4">
                                <i class="bi bi-person-badge-fill text-primary dashboard-icon"></i>
                                <h4 class="card-title">Gestión de Profesionales</h4>
                                <p class="card-text text-muted">Administrar médicos y especialidades</p>
                            </div>
                        </div>
                    </div>

                    <!-- Nuevo card para Órdenes de Laboratorio -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card dashboard-card text-center" onclick="showView('ver-ordenes')">
                            <div class="card-body p-4">
                                <i class="bi bi-clipboard2-data-fill text-secondary dashboard-icon"></i>
                                <h4 class="card-title">Órdenes de Laboratorio</h4>
                                <p class="card-text text-muted">Gestionar órdenes y resultados</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card Farmacia -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card dashboard-card text-center" onclick="showView('ver-medicamentos')">
                            <div class="card-body p-4">
                                <i class="bi bi-capsule-pill text-warning dashboard-icon"></i>
                                <h4 class="card-title">Farmacia</h4>
                                <p class="card-text text-muted">Control de stock y medicamentos</p>
                            </div>
                        </div>
                    </div>

                    <!-- Nuevo card para Facturación -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card dashboard-card text-center" onclick="showView('ver-facturas')">
                            <div class="card-body p-4">
                                <i class="bi bi-receipt-cutoff text-success dashboard-icon"></i>
                                <h4 class="card-title">Facturación</h4>
                                <p class="card-text text-muted">Gestionar facturas y pagos</p>
                            </div>
                        </div>
                    </div>

                    <!-- Card Gestión de Usuarios -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card dashboard-card text-center" onclick="showView('ver-usuarios')">
                            <div class="card-body p-4">
                                <i class="bi bi-person-gear text-danger dashboard-icon"></i>
                                <h4 class="card-title">Gestión de Usuarios</h4>
                                <p class="card-text text-muted">Administrar usuarios y permisos</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Turnos (CRUD completo) -->
            <div id="view-ver-turnos" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Turnos</h2>
                    <button class="btn btn-success" onclick="showView('agendar-turno')">
                        <i class="bi bi-plus-circle me-1"></i> Agendar Nuevo Turno
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchTurnos" class="form-control" placeholder="Buscar por paciente, profesional o fecha...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID Turno</th>
                                <th>Profesional</th>
                                <th>Paciente</th>
                                <th>Fecha y Hora</th>
                                <th>Tipo Consulta</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaTurnos">
                            <tr>
                                <td>1</td>
                                <td>Dr. García</td>
                                <td>Juan Pérez</td>
                                <td>2025-01-25 09:00</td>
                                <td>Consulta General</td>
                                <td><span class="badge bg-warning">P - Pendiente</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-turno')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Cancelar">
                                        <i class="bi bi-x-circle"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Dra. Martínez</td>
                                <td>María González</td>
                                <td>2025-01-25 10:30</td>
                                <td>Control</td>
                                <td><span class="badge bg-info">C - Confirmado</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-turno')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Cancelar">
                                        <i class="bi bi-x-circle"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Dr. Rodríguez</td>
                                <td>Carlos López</td>
                                <td>2025-01-24 14:00</td>
                                <td>Urgencia</td>
                                <td><span class="badge bg-success">A - Atendido</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-turno')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Cancelar">
                                        <i class="bi bi-x-circle"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Calendario de Turnos -->
            <div id="view-calendario-turnos" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Calendario de Turnos</h2>
                    <button class="btn btn-success" onclick="showView('agendar-turno')">
                        <i class="bi bi-plus-circle me-1"></i> Agendar Turno
                    </button>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <label class="form-label">Profesional</label>
                        <select class="form-select">
                            <option value="">Todos los profesionales</option>
                            <option value="1">Dr. García - Clínica Médica</option>
                            <option value="2">Dra. Martínez - Pediatría</option>
                            <option value="3">Dr. Rodríguez - Cardiología</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Mes</label>
                        <input type="month" class="form-control" value="2025-01">
                    </div>
                    <div class="col-md-4 d-flex align-items-end">
                        <button class="btn btn-primary w-100">Filtrar</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0 text-center">Enero 2025</h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-bordered mb-0">
                                <thead>
                                    <tr class="text-center">
                                        <th class="bg-light">Lunes</th>
                                        <th class="bg-light">Martes</th>
                                        <th class="bg-light">Miércoles</th>
                                        <th class="bg-light">Jueves</th>
                                        <th class="bg-light">Viernes</th>
                                        <th class="bg-light">Sábado</th>
                                        <th class="bg-light">Domingo</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">1</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">2</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">3</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">4</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">5</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">6</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">7</div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">8</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">9</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">10</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">11</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">12</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">13</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">14</div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">15</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">16</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">17</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">18</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">19</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">20</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">21</div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">22</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">23</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">24</div>
                                            <div class="badge bg-success text-white small">14:00 - Dr. R.</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold">25</div>
                                            <div class="badge bg-warning text-dark small">09:00 - Dr. G.</div>
                                            <div class="badge bg-info text-white small mt-1">10:30 - Dra. M.</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">26</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">27</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">28</div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">29</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">30</div>
                                        </td>
                                        <td class="p-2" style="height: 100px; vertical-align: top;">
                                            <div class="fw-bold text-muted">31</div>
                                        </td>
                                        <td class="p-2 bg-light" style="height: 100px;"></td>
                                        <td class="p-2 bg-light" style="height: 100px;"></td>
                                        <td class="p-2 bg-light" style="height: 100px;"></td>
                                        <td class="p-2 bg-light" style="height: 100px;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="d-flex gap-3 justify-content-center">
                            <span><span class="badge bg-warning">Pendiente</span></span>
                            <span><span class="badge bg-info">Confirmado</span></span>
                            <span><span class="badge bg-success">Atendido</span></span>
                            <span><span class="badge bg-danger">Cancelado</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Detalle de Turno -->
            <div id="view-detalle-turno" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle del Turno</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-turnos')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Turnos
                    </button>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Información del Turno</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID Turno:</strong> 1</p>
                                <p><strong>Fecha y Hora:</strong> 2025-01-20 09:00</p>
                                <p><strong>Estado:</strong> <span class="badge bg-warning">P - Pendiente</span></p>
                                <p><strong>Tipo de Consulta:</strong> Consulta General</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">Paciente</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>Nombre:</strong> Juan Pérez</p>
                                <p><strong>Documento:</strong> 12345678</p>
                                <p><strong>Teléfono:</strong> 3512345678</p>
                            </div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Profesional</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>Nombre:</strong> Dr. Carlos García</p>
                                <p><strong>Matrícula:</strong> MP-12345</p>
                                <p><strong>Especialidad:</strong> Clínica Médica</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Consultas con CRUD completo -->
            <div id="view-ver-consultas" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Consultas Médicas</h2>
                    <button class="btn btn-success" onclick="showView('registrar-consulta')">
                        <i class="bi bi-plus-circle me-1"></i> Registrar Nueva Consulta
                    </button>
                </div>

                <!-- Agregado buscador para consultas -->
                <div class="mb-3">
                    <input type="text" id="searchConsultas" class="form-control" placeholder="Buscar por paciente, motivo o diagnóstico...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID Consulta</th>
                                <th>ID Turno</th>
                                <th>Paciente</th>
                                <th>Motivo</th>
                                <th>Diagnóstico</th>
                                <th>Fecha</th>
                                <!-- Agregada columna Receta -->
                                <th>Receta</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaConsultas">
                            <tr>
                                <td>1</td>
                                <td>2</td>
                                <td>María González</td>
                                <td>Control de rutina</td>
                                <td>Paciente en buen estado general</td>
                                <td>2025-01-20</td>
                                <td><span class="badge bg-success">Sí</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-consulta')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>5</td>
                                <td>Carlos Rodríguez</td>
                                <td>Dolor de cabeza</td>
                                <td>Cefalea tensional</td>
                                <td>2025-01-21</td>
                                <td><span class="badge bg-success">Sí</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-consulta')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>8</td>
                                <td>Ana Martínez</td>
                                <td>Fiebre</td>
                                <td>Infección viral</td>
                                <td>2025-01-22</td>
                                <td><span class="badge bg-secondary">No</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-consulta')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Detalle de Consulta -->
            <div id="view-detalle-consulta" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle de la Consulta</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-consultas')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Consultas
                    </button>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Información de la Consulta</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID Consulta:</strong> 1</p>
                                <p><strong>ID Turno:</strong> 2</p>
                                <p><strong>Paciente:</strong> María González</p>
                                <p><strong>Fecha:</strong> 2025-01-20</p>
                                <p><strong>Motivo:</strong> Control de rutina</p>
                                <p><strong>Diagnóstico:</strong> Paciente en buen estado general</p>
                                <p><strong>Notas:</strong> Se recomienda continuar con controles periódicos</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <!-- Receta mostrada directamente en el detalle -->
                        <div class="card mb-3">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Receta Asociada</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID Receta:</strong> 1</p>
                                <p><strong>Fecha de Emisión:</strong> 2025-01-20</p>
                                <p><strong>Descripción:</strong></p>
                                <div class="alert alert-light">
                                    <p class="mb-1">• Paracetamol 500mg - 1 comprimido cada 8 horas por 5 días</p>
                                    <p class="mb-1">• Ibuprofeno 400mg - 1 comprimido cada 12 horas si hay dolor</p>
                                    <p class="mb-0">• Reposo relativo</p>
                                </div>
                                <button class="btn btn-primary btn-sm" onclick="showView('ver-recetas')">
                                    <i class="bi bi-file-earmark-text me-1"></i> Ver Todas las Recetas
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Recetas -->
            <div id="view-ver-recetas" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Recetas Médicas</h2>
                    <button class="btn btn-success" onclick="showView('insertar-receta')">
                        <i class="bi bi-plus-circle me-1"></i> Agregar Nueva Receta
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchRecetas" class="form-control" placeholder="Buscar por paciente o descripción...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID Receta</th>
                                <th>ID Consulta</th>
                                <th>Paciente</th>
                                <th>Descripción</th>
                                <th>Fecha Emisión</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaRecetas">
                            <tr>
                                <td>1</td>
                                <td>2</td>
                                <td>Juan Pérez</td>
                                <td>Ibuprofeno 600mg - 1 cada 8hs por 5 días</td>
                                <td>2025-01-18</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-receta')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-secondary" title="Imprimir">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>3</td>
                                <td>Carlos López</td>
                                <td>Amoxicilina 500mg - 1 cada 12hs por 7 días</td>
                                <td>2025-01-15</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-receta')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-secondary" title="Imprimir">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Insertar Receta -->
            <div id="view-insertar-receta" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Insertar Receta</h2>
                    <p class="text-muted">Tabla: RECETAS</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">ID Consulta *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Fecha de Emisión *</label>
                        <input type="date" class="form-control" required>
                    </div>
                    <div class="col-12">
                        <label class="form-label">Descripción de la Receta *</label>
                        <textarea class="form-control" rows="4" placeholder="Ej: Ibuprofeno 600mg - 1 comprimido cada 8 horas por 5 días" required></textarea>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Guardar Receta</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-recetas')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Nueva vista: Detalle de Receta -->
            <div id="view-detalle-receta" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle de la Receta</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-recetas')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Recetas
                    </button>
                </div>

                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Receta Médica #1</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <p><strong>Paciente:</strong> Juan Pérez</p>
                                <p><strong>Documento:</strong> 12345678</p>
                                <p><strong>Fecha de Emisión:</strong> 2025-01-18</p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>Profesional:</strong> Dr. Carlos García</p>
                                <p><strong>Matrícula:</strong> MP-12345</p>
                                <p><strong>ID Consulta:</strong> 2</p>
                            </div>
                        </div>
                        <hr>
                        <h6>Prescripción:</h6>
                        <p class="text-muted">Ibuprofeno 600mg - 1 comprimido cada 8 horas por 5 días</p>
                        <div class="mt-3">
                            <button class="btn btn-secondary">
                                <i class="bi bi-printer me-1"></i> Imprimir Receta
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Tipos de Consultas -->
            <div id="view-ver-tipos-consultas" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Tipos de Consultas</h2>
                    <button class="btn btn-success" onclick="showView('insertar-tipo-consulta')">
                        <i class="bi bi-plus-circle me-1"></i> Agregar Nuevo Tipo
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchTiposConsultas" class="form-control" placeholder="Buscar tipo de consulta...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID</th>
                                <th>Tipo de Consulta</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaTiposConsultas">
                            <tr>
                                <td>1</td>
                                <td>Consulta General</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-tipo-consulta')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Control</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-tipo-consulta')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Urgencia</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-tipo-consulta')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Pediatría</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-tipo-consulta')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Insertar Tipo de Consulta -->
            <div id="view-insertar-tipo-consulta" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Insertar Tipo de Consulta</h2>
                    <p class="text-muted">Tabla: TIPOS_CONSULTAS</p>
                </div>

                <form class="row g-3">
                    <div class="col-12">
                        <label class="form-label">Tipo de Consulta *</label>
                        <input type="text" class="form-control" placeholder="Ej: Consulta Cardiológica" required>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Guardar Tipo de Consulta</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-tipos-consultas')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Nueva vista: Detalle de Tipo de Consulta -->
            <div id="view-detalle-tipo-consulta" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle del Tipo de Consulta</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-tipos-consultas')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Tipos de Consultas
                    </button>
                </div>

                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Información del Tipo de Consulta</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>ID:</strong> 1</p>
                        <p><strong>Tipo de Consulta:</strong> Consulta General</p>
                        <p><strong>Descripción:</strong> Consulta médica general para diagnóstico y tratamiento de enfermedades comunes.</p>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: CRUD de Pacientes -->
            <div id="view-ver-pacientes" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <!-- Cambio de título de "Todos los Pacientes" a "Pacientes" -->
                    <h2>Pacientes</h2>
                    <button class="btn btn-success" onclick="showView('insertar-paciente')">
                        <i class="bi bi-plus-circle me-1"></i> Agregar Nuevo Paciente
                    </button>
                </div>

                <!-- Agregado buscador para pacientes -->
                <div class="mb-3">
                    <input type="text" id="searchPacientes" class="form-control" placeholder="Buscar por nombre, apellido o documento...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Apellido</th>
                                <th>Documento</th>
                                <th>Fecha Nac.</th>
                                <th>Sexo</th>
                                <th>Teléfono</th>
                                <th>Email</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaPacientes">
                            <tr>
                                <td>1</td>
                                <td>Juan</td>
                                <td>Pérez</td>
                                <td>12345678</td>
                                <td>1985-03-15</td>
                                <td>M</td>
                                <td>3512345678</td>
                                <td>juan.perez@email.com</td>
                                <td>
                                    <!-- Agregado botón Ver Detalles -->
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-paciente')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>María</td>
                                <td>González</td>
                                <td>87654321</td>
                                <td>1990-07-22</td>
                                <td>F</td>
                                <td>3519876543</td>
                                <td>maria.gonzalez@email.com</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-paciente')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Carlos</td>
                                <td>López</td>
                                <td>11223344</td>
                                <td>1978-11-05</td>
                                <td>M</td>
                                <td>3511122334</td>
                                <td>carlos.lopez@email.com</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-paciente')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Detalle del Paciente -->
            <div id="view-detalle-paciente" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Detalle del Paciente</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-pacientes')">
                        <i class="bi bi-arrow-left me-1"></i> Volver
                    </button>
                </div>

                <div class="row">
                    <!-- Información del Paciente -->
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Información Personal</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID:</strong> 1</p>
                                <p><strong>Nombre Completo:</strong> Juan Pérez</p>
                                <p><strong>Documento:</strong> 12345678</p>
                                <p><strong>Fecha de Nacimiento:</strong> 15/03/1985 (39 años)</p>
                                <p><strong>Sexo:</strong> Masculino</p>
                                <p><strong>Teléfono:</strong> 3512345678</p>
                                <p><strong>Email:</strong> juan.perez@email.com</p>
                                <p><strong>Dirección:</strong> Av. Colón 1234, Córdoba</p>
                                <p><strong>Grupo Sanguíneo:</strong> O+</p>
                            </div>
                        </div>
                    </div>

                    <!-- Alergia del Paciente -->
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-warning text-dark">
                                <h5 class="mb-0">Alergia</h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-warning mb-0">
                                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                    <strong>Penicilina</strong>
                                </div>
                                <p class="text-muted mt-2 mb-0">
                                    <small>El paciente tiene alergia registrada. Tener precaución al prescribir medicamentos.</small>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Contactos de Emergencia -->
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header bg-danger text-white">
                                <h5 class="mb-0">Contactos de Emergencia</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-sm">
                                        <thead>
                                            <tr>
                                                <th>Nombre</th>
                                                <th>Relación</th>
                                                <th>Teléfono</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>María Pérez</td>
                                                <td>Esposa</td>
                                                <td>3519876543</td>
                                            </tr>
                                            <tr>
                                                <td>Carlos Pérez</td>
                                                <td>Hermano</td>
                                                <td>3511234567</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Alergias con CRUD -->
            <div id="view-ver-alergias" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Alergias</h2>
                    <button class="btn btn-success" onclick="showView('insertar-alergia')">
                        <i class="bi bi-plus-circle me-1"></i> Agregar Nueva Alergia
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchAlergias" class="form-control" placeholder="Buscar alergia...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID</th>
                                <th>Nombre de la Alergia</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaAlergias">
                            <tr>
                                <td>1</td>
                                <td>Penicilina</td>
                                <!-- Agregado botón Ver Detalles -->
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-alergia')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Lactosa</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-alergia')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Maní</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-alergia')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Polen</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-alergia')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Ácaros</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-alergia')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Insertar Alergia -->
            <div id="view-insertar-alergia" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Insertar Alergia</h2>
                    <p class="text-muted">Tabla: ALERGIAS</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-12">
                        <label class="form-label">Nombre de la Alergia *</label>
                        <input type="text" class="form-control" maxlength="50" placeholder="Ej: Penicilina, Lactosa, Maní..." required>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Guardar Alergia</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-alergias')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Nueva vista: Detalle de Alergia -->
            <div id="view-detalle-alergia" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle de la Alergia</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-alergias')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Alergias
                    </button>
                </div>

                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Información de la Alergia</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>ID Alergia:</strong> 1</p>
                        <p><strong>Nombre:</strong> Penicilina</p>
                        <hr>
                        <h6>Pacientes con esta alergia:</h6>
                        <ul>
                            <li>Juan Pérez (ID: 1)</li>
                            <li>María González (ID: 2)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Contactos de Emergencia con CRUD -->
            <div id="view-ver-contactos-emergencia" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Contactos de Emergencia</h2>
                    <button class="btn btn-success" onclick="showView('insertar-contacto-emergencia')">
                        <i class="bi bi-plus-circle me-1"></i> Agregar Nuevo Contacto
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchContactos" class="form-control" placeholder="Buscar por nombre, relación o teléfono...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID</th>
                                <th>Paciente</th>
                                <th>Nombre Contacto</th>
                                <th>Relación</th>
                                <th>Teléfono</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaContactos">
                            <tr>
                                <td>1</td>
                                <td>Juan Pérez</td>
                                <td>María Pérez</td>
                                <td>Esposa</td>
                                <td>3519876543</td>
                                <!-- Agregado botón Ver Detalles -->
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-contacto')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Juan Pérez</td>
                                <td>Carlos Pérez</td>
                                <td>Hermano</td>
                                <td>3511234567</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-contacto')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>María González</td>
                                <td>Pedro González</td>
                                <td>Padre</td>
                                <td>3517654321</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-contacto')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Carlos López</td>
                                <td>Ana López</td>
                                <td>Madre</td>
                                <td>3518765432</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-contacto')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Insertar Contacto de Emergencia -->
            <div id="view-insertar-contacto-emergencia" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Insertar Contacto de Emergencia</h2>
                    <p class="text-muted">Tabla: CONTACTOS_EMERGENCIAS</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">ID Paciente *</label>
                        <input type="number" class="form-control" required>
                        <small class="text-muted">ID del paciente al que pertenece este contacto</small>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Nombre del Contacto *</label>
                        <input type="text" class="form-control" maxlength="50" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Relación *</label>
                        <input type="text" class="form-control" maxlength="50" placeholder="Ej: Esposa, Padre, Hermano..." required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Teléfono *</label>
                        <input type="text" class="form-control" maxlength="50" required>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Guardar Contacto</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-contactos-emergencia')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Nueva vista: Detalle de Contacto de Emergencia -->
            <div id="view-detalle-contacto" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle del Contacto de Emergencia</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-contactos-emergencia')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Contactos
                    </button>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Información del Contacto</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID Contacto:</strong> 1</p>
                                <p><strong>Nombre:</strong> Ana Pérez</p>
                                <p><strong>Relación:</strong> Esposa</p>
                                <p><strong>Teléfono:</strong> 3519876543</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">Paciente Asociado</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>Nombre:</strong> Juan Pérez</p>
                                <p><strong>Documento:</strong> 12345678</p>
                                <p><strong>Teléfono:</strong> 3512345678</p>
                                <button class="btn btn-sm btn-primary" onclick="showView('detalle-paciente')">
                                    Ver Paciente Completo
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vista: SP_INSERTAR_PACIENTE con campos reales de la tabla PACIENTES -->
            <div id="view-insertar-paciente" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Insertar Paciente</h2>
                    <p class="text-muted">Procedimiento: SP_INSERTAR_PACIENTE</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Nombre *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Apellido *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Documento *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Fecha de Nacimiento *</label>
                        <input type="date" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Sexo *</label>
                        <select class="form-select" required>
                            <option value="">Seleccionar...</option>
                            <option value="M">M - Masculino</option>
                            <option value="F">F - Femenino</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Teléfono *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Email *</label>
                        <input type="email" class="form-control" required>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Guardar Paciente</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-pacientes')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Vista: SP_BUSCAR_HISTORIAL_POR_PACIENTE -->
            <div id="view-buscar-historial" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Buscar Historial por Paciente</h2>
                    <p class="text-muted">Procedimiento: SP_BUSCAR_HISTORIAL_POR_PACIENTE</p>
                </div>

                <form class="row g-3 mb-4">
                    <div class="col-md-8">
                        <label class="form-label">ID Paciente *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-4 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary w-100">Buscar Historial</button>
                    </div>
                </form>

                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Resultados: Consultas y Recetas</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>ID Consulta</th>
                                    <th>Motivo</th>
                                    <th>Diagnóstico</th>
                                    <th>Notas</th>
                                    <th>Receta</th>
                                    <th>Fecha Emisión</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" class="text-center text-muted">Ingrese un ID de paciente para ver resultados</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Vista: SP_REGISTRAR_CONSULTA -->
            <div id="view-registrar-consulta" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Registrar Consulta</h2>
                    <p class="text-muted">Procedimiento: SP_REGISTRAR_CONSULTA</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-12">
                        <label class="form-label">ID Turno *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-12">
                        <label class="form-label">Motivo *</label>
                        <input type="text" class="form-control" maxlength="100" required>
                    </div>
                    <div class="col-md-12">
                        <label class="form-label">Diagnóstico *</label>
                        <textarea class="form-control" rows="3" maxlength="100" required></textarea>
                    </div>
                    <div class="col-md-12">
                        <label class="form-label">Notas</label>
                        <textarea class="form-control" rows="3" maxlength="100"></textarea>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Registrar Consulta</button>
                        <button type="reset" class="btn btn-secondary">Limpiar</button>
                    </div>
                </form>
                <div class="alert alert-info mt-3">
                    <strong>Nota:</strong> Al registrar la consulta, el turno se marcará automáticamente como "A - Atendido"
                </div>
            </div>

            <!-- Vista: SP_AGENDAR_TURNO -->
            <div id="view-agendar-turno" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Agendar Turno</h2>
                    <p class="text-muted">Procedimiento: SP_AGENDAR_TURNO</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">ID Profesional *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ID Paciente *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Fecha y Hora *</label>
                        <input type="datetime-local" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ID Tipo Consulta *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Agendar Turno</button>
                        <button type="reset" class="btn btn-secondary">Limpiar</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-turnos')">Volver a Turnos</button>
                    </div>
                </form>
                <div class="alert alert-info mt-3">
                    <strong>Nota:</strong> El sistema verificará automáticamente que el paciente exista y que el horario esté disponible
                </div>
            </div>

            <!-- Vista: SP_LISTAR_TURNOS_POR_DIA -->
            <div id="view-listar-turnos-dia" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Listar Turnos por Día</h2>
                    <p class="text-muted">Procedimiento: SP_LISTAR_TURNOS_POR_DIA</p>
                </div>

                <form class="row g-3 mb-4">
                    <div class="col-md-5">
                        <label class="form-label">ID Profesional *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-5">
                        <label class="form-label">Fecha *</label>
                        <input type="date" class="form-control" required>
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary w-100">Buscar</button>
                    </div>
                </form>

                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead class="table-primary">
                            <tr>
                                <th>ID Turno</th>
                                <th>Fecha y Hora</th>
                                <th>Estado</th>
                                <th>Paciente</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="4" class="text-center text-muted">Seleccione un profesional y fecha para ver turnos</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Vista: SP_VERIFICAR_DISPONIBILIDAD_TURNO -->
            <div id="view-verificar-disponibilidad" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Verificar Disponibilidad de Turno</h2>
                    <p class="text-muted">Procedimiento: SP_VERIFICAR_DISPONIBILIDAD_TURNO</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">ID Profesional *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Fecha y Hora *</label>
                        <input type="datetime-local" class="form-control" required>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Verificar Disponibilidad</button>
                    </div>
                </form>

                <div class="alert alert-secondary mt-3">
                    <strong>Resultado:</strong> Aquí se mostrará si el turno está disponible o no
                </div>
            </div>

            <!-- Vista: SP_CANCELAR_TURNO -->
            <div id="view-cancelar-turno" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Cancelar Turno</h2>
                    <p class="text-muted">Procedimiento: SP_CANCELAR_TURNO</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-8">
                        <label class="form-label">ID Turno *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-4 d-flex align-items-end">
                        <button type="submit" class="btn btn-danger w-100">Cancelar Turno</button>
                    </div>
                </form>

                <div class="alert alert-warning mt-3">
                    <strong>Atención:</strong> Esta acción cambiará el estado del turno a "X - Cancelado"
                </div>
            </div>

            <!-- Vista: SP_REPORTE_STOCK_MINIMO con campos reales de STOCK_FARMACIA y MEDICAMENTOS -->
            <div id="view-stock-minimo" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Stock Mínimo de Farmacia</h2>
                    <p class="text-muted">Procedimiento: SP_REPORTE_STOCK_MINIMO (Medicamentos con stock ≤ 5)</p>
                </div>

                <button class="btn btn-primary mb-3">Generar Reporte</button>

                <div class="alert alert-warning">
                    <strong>Atención:</strong> Productos con stock igual o menor a 5 unidades
                </div>

                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead class="table-warning">
                            <tr>
                                <th>Nombre Medicamento</th>
                                <th>Cantidad</th>
                                <th>Fecha Vencimiento</th>
                                <th>Ubicación</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ibuprofeno 600mg</td>
                                <td><span class="badge bg-danger">3</span></td>
                                <td>2025-06-15</td>
                                <td>Estante A-12</td>
                            </tr>
                            <tr>
                                <td>Paracetamol 500mg</td>
                                <td><span class="badge bg-warning text-dark">5</span></td>
                                <td>2025-08-20</td>
                                <td>Estante B-05</td>
                            </tr>
                            <tr>
                                <td>Amoxicilina 500mg</td>
                                <td><span class="badge bg-danger">2</span></td>
                                <td>2025-04-10</td>
                                <td>Refrigerador C-01</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Vista: SP_ACTUALIZAR_STOCK -->
            <div id="view-actualizar-stock" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Actualizar Stock</h2>
                    <p class="text-muted">Procedimiento: SP_ACTUALIZAR_STOCK</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label">ID Stock *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Cantidad *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Operación *</label>
                        <select class="form-select" required>
                            <option value="">Seleccionar...</option>
                            <option value="0">0 - Disminuir</option>
                            <option value="1">1 - Aumentar</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Actualizar Stock</button>
                        <button type="reset" class="btn btn-secondary">Limpiar</button>
                    </div>
                </form>

                <div class="alert alert-info mt-3">
                    <strong>Instrucciones:</strong>
                    <ul class="mb-0">
                        <li>Operación 0: Disminuye el stock (ej: venta, uso)</li>
                        <li>Operación 1: Aumenta el stock (ej: compra, reposición)</li>
                        <li>El sistema validará que haya suficiente stock antes de disminuir</li>
                    </ul>
                </div>
            </div>

            <!-- Nueva vista: Ver Medicamentos con CRUD completo -->
            <div id="view-ver-medicamentos" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Medicamentos</h2>
                    <button class="btn btn-success" onclick="showView('insertar-medicamento')">
                        <i class="bi bi-plus-circle me-1"></i> Agregar Nuevo Medicamento
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchMedicamentos" class="form-control" placeholder="Buscar por nombre, presentación o laboratorio...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Presentación</th>
                                <th>Laboratorio</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaMedicamentos">
                            <tr>
                                <td>1</td>
                                <td>Ibuprofeno</td>
                                <td>600mg - Comprimidos</td>
                                <td>Bayer</td>
                                <!-- Agregado botón Ver Detalles -->
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-medicamento')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Amoxicilina</td>
                                <td>500mg - Cápsulas</td>
                                <td>Roemmers</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-medicamento')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Paracetamol</td>
                                <td>500mg - Comprimidos</td>
                                <td>Gador</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-medicamento')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Insertar Medicamento -->
            <div id="view-insertar-medicamento" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Insertar Medicamento</h2>
                    <p class="text-muted">Tabla: MEDICAMENTOS</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-12">
                        <label class="form-label">Nombre *</label>
                        <input type="text" class="form-control" maxlength="50" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Presentación *</label>
                        <input type="text" class="form-control" maxlength="50" placeholder="Ej: 500mg - Comprimidos" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Laboratorio *</label>
                        <input type="text" class="form-control" maxlength="50" required>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Guardar Medicamento</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-medicamentos')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Nueva vista: Detalle de Medicamento -->
            <div id="view-detalle-medicamento" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle del Medicamento</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-medicamentos')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Medicamentos
                    </button>
                </div>

                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Información del Medicamento</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>ID Medicamento:</strong> 1</p>
                                <p><strong>Nombre:</strong> Ibuprofeno</p>
                                <p><strong>Presentación:</strong> 600mg - Comprimidos</p>
                                <p><strong>Laboratorio:</strong> Bayer</p>
                            </div>
                            <div class="col-md-6">
                                <h6>Stock Disponible:</h6>
                                <ul class="list-unstyled">
                                    <li>Lote 12345: 150 unidades (Vence: 2026-06-30)</li>
                                    <li>Lote 12346: 80 unidades (Vence: 2026-08-15)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Usuarios del sistema -->
            <div id="view-ver-usuarios" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Usuarios del Sistema</h2>
                    <!-- Botón ahora redirige a la vista de insertar usuario -->
                    <button class="btn btn-success" onclick="showView('insertar-usuario')">
                        <i class="bi bi-plus-circle me-1"></i> Agregar Nuevo Usuario
                    </button>
                </div>

                <!-- Agregado buscador para usuarios -->
                <div class="mb-3">
                    <input type="text" id="searchUsuarios" class="form-control" placeholder="Buscar por usuario, nombre o email...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID</th>
                                <th>Usuario</th>
                                <th>Nombre Completo</th>
                                <th>Email</th>
                                <th>Rol</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaUsuarios">
                            <tr>
                                <td>1</td>
                                <td>admin</td>
                                <td>Administrador Sistema</td>
                                <td>admin@centrosalud.com</td>
                                <td><span class="badge bg-danger">Administrador</span></td>
                                <td><span class="badge bg-success">Activo</span></td>
                                <!-- Agregado botón Ver Detalles -->
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-usuario')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" title="Gestionar Roles" onclick="showView('gestionar-roles')">
                                        <i class="bi bi-shield-check"></i>
                                    </button>
                                    <!-- Agregado botón de eliminar usuario -->
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>recepcion01</td>
                                <td>Ana Martínez</td>
                                <td>ana.martinez@centrosalud.com</td>
                                <td><span class="badge bg-info">Recepcionista</span></td>
                                <td><span class="badge bg-success">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-usuario')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" title="Gestionar Roles" onclick="showView('gestionar-roles')">
                                        <i class="bi bi-shield-check"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>farmacia01</td>
                                <td>Pedro Gómez</td>
                                <td>pedro.gomez@centrosalud.com</td>
                                <td><span class="badge bg-success">Farmacéutico</span></td>
                                <td><span class="badge bg-success">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-usuario')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" title="Gestionar Roles" onclick="showView('gestionar-roles')">
                                        <i class="bi bi-shield-check"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Insertar Usuario -->
            <div id="view-insertar-usuario" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Insertar Usuario</h2>
                    <p class="text-muted">Crear nuevo usuario del sistema</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Nombre de Usuario *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Contraseña *</label>
                        <input type="password" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Nombre Completo *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Email *</label>
                        <input type="email" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Rol *</label>
                        <select class="form-select" required>
                            <option value="">Seleccionar...</option>
                            <option value="admin">Administrador</option>
                            <option value="recepcionista">Recepcionista</option>
                            <option value="farmaceutico">Farmacéutico</option>
                            <option value="medico">Médico</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Estado *</label>
                        <select class="form-select" required>
                            <option value="activo">Activo</option>
                            <option value="inactivo">Inactivo</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Guardar Usuario</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-usuarios')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Nueva vista: Detalle de Usuario -->
            <div id="view-detalle-usuario" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle del Usuario</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-usuarios')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Usuarios
                    </button>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Información del Usuario</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID Usuario:</strong> 1</p>
                                <p><strong>Usuario:</strong> admin</p>
                                <p><strong>Nombre Completo:</strong> Administrador Sistema</p>
                                <p><strong>Email:</strong> admin@centrosalud.com</p>
                                <p><strong>Estado:</strong> <span class="badge bg-success">Activo</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Rol y Permisos</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>Rol:</strong> <span class="badge bg-danger">Administrador</span></p>
                                <p><strong>Permisos:</strong></p>
                                <ul class="list-unstyled">
                                    <li><i class="bi bi-check-circle-fill text-success"></i> Acceso total al sistema</li>
                                    <li><i class="bi bi-check-circle-fill text-success"></i> Gestión de usuarios</li>
                                    <li><i class="bi bi-check-circle-fill text-success"></i> Gestión de roles</li>
                                    <li><i class="bi bi-check-circle-fill text-success"></i> Todas las operaciones</li>
                                </ul>
                                <button class="btn btn-warning" onclick="showView('gestionar-roles')">
                                    <i class="bi bi-shield-check me-1"></i> Gestionar Permisos
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actualizada vista: Gestionar Roles con todos los nuevos permisos -->
            <div id="view-gestionar-roles" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Gestionar Roles y Permisos</h2>
                    <p class="text-muted">Asignar o quitar permisos a usuarios del sistema</p>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Seleccionar Usuario</h5>
                            </div>
                            <div class="card-body">
                                <select class="form-select mb-3">
                                    <option value="">Seleccionar usuario...</option>
                                    <option value="1">admin - Administrador Sistema</option>
                                    <option value="2">recepcion01 - Ana Martínez</option>
                                    <option value="3">farmacia01 - Pedro Gómez</option>
                                </select>
                                <button class="btn btn-primary w-100">Cargar Permisos</button>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Permisos del Usuario</h5>
                            </div>
                            <div class="card-body" style="max-height: 600px; overflow-y: auto;">
                                <!-- Agregando permisos de Dashboard -->
                                <h6 class="border-bottom pb-2">Dashboard y Estadísticas</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_dashboard" checked>
                                    <label class="form-check-label" for="perm_dashboard">Ver Dashboard</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_estadisticas" checked>
                                    <label class="form-check-label" for="perm_estadisticas">Ver Estadísticas</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="perm_notificaciones" checked>
                                    <label class="form-check-label" for="perm_notificaciones">Ver Notificaciones</label>
                                </div>

                                <h6 class="border-bottom pb-2">Gestión de Pacientes</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm1" checked>
                                    <label class="form-check-label" for="perm1">Ver Pacientes</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm2" checked>
                                    <label class="form-check-label" for="perm2">Insertar Paciente</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm3" checked>
                                    <label class="form-check-label" for="perm3">Buscar Historial</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_alergias" checked>
                                    <label class="form-check-label" for="perm_alergias">Ver Alergias</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_insertar_alergias" checked>
                                    <label class="form-check-label" for="perm_insertar_alergias">Insertar Alergias</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_contactos" checked>
                                    <label class="form-check-label" for="perm_contactos">Ver Contactos de Emergencia</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_insertar_contactos" checked>
                                    <label class="form-check-label" for="perm_insertar_contactos">Insertar Contactos de Emergencia</label>
                                </div>
                                <!-- Agregando permiso de historial completo -->
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_historial_completo" checked>
                                    <label class="form-check-label" for="perm_historial_completo">Ver Historial Completo del Paciente</label>
                                </div>

                                <h6 class="border-bottom pb-2">Gestión de Turnos</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm5" checked>
                                    <label class="form-check-label" for="perm5">Ver Turnos</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm6" checked>
                                    <label class="form-check-label" for="perm6">Agendar Turno</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm7">
                                    <label class="form-check-label" for="perm7">Cancelar Turno</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm8" checked>
                                    <label class="form-check-label" for="perm8">Verificar Disponibilidad</label>
                                </div>
                                <!-- Agregando permiso de calendario -->
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="perm_calendario" checked>
                                    <label class="form-check-label" for="perm_calendario">Ver Calendario de Turnos</label>
                                </div>

                                <h6 class="border-bottom pb-2">Gestión de Consultas</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_ver_consultas" checked>
                                    <label class="form-check-label" for="perm_ver_consultas">Ver Consultas</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm4" checked>
                                    <label class="form-check-label" for="perm4">Registrar Consulta</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_recetas" checked>
                                    <label class="form-check-label" for="perm_recetas">Ver Recetas</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_insertar_recetas" checked>
                                    <label class="form-check-label" for="perm_insertar_recetas">Insertar Recetas</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_tipos_consultas" checked>
                                    <label class="form-check-label" for="perm_tipos_consultas">Ver Tipos de Consultas</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="perm_insertar_tipos_consultas" checked>
                                    <label class="form-check-label" for="perm_insertar_tipos_consultas">Insertar Tipos de Consultas</label>
                                </div>

                                <h6 class="border-bottom pb-2">Gestión de Profesionales</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_profesionales" checked>
                                    <label class="form-check-label" for="perm_profesionales">Ver Profesionales</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_insertar_profesionales" checked>
                                    <label class="form-check-label" for="perm_insertar_profesionales">Insertar Profesionales</label>
                                </div>
                                <!-- Agregando permisos de especialidades -->
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_ver_especialidades" checked>
                                    <label class="form-check-label" for="perm_ver_especialidades">Ver Especialidades</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_insertar_especialidades" checked>
                                    <label class="form-check-label" for="perm_insertar_especialidades">Insertar Especialidades</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_asignar_especialidad" checked>
                                    <label class="form-check-label" for="perm_asignar_especialidad">Asignar Especialidades</label>
                                </div>

                                <h6 class="border-bottom pb-2">Órdenes de Laboratorio</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_ordenes" checked>
                                    <label class="form-check-label" for="perm_ordenes">Ver Órdenes de Laboratorio</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="perm_crear_ordenes" checked>
                                    <label class="form-check-label" for="perm_crear_ordenes">Crear Órdenes de Laboratorio</label>
                                </div>

                                <h6 class="border-bottom pb-2">Farmacia</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_medicamentos">
                                    <label class="form-check-label" for="perm_medicamentos">Ver Medicamentos</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_insertar_medicamentos">
                                    <label class="form-check-label" for="perm_insertar_medicamentos">Insertar Medicamentos</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm9">
                                    <label class="form-check-label" for="perm9">Ver Stock Mínimo</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="perm10">
                                    <label class="form-check-label" for="perm10">Actualizar Stock</label>
                                </div>

                                <h6 class="border-bottom pb-2">Facturación</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm_facturas" checked>
                                    <label class="form-check-label" for="perm_facturas">Ver Facturas</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="perm_crear_facturas" checked>
                                    <label class="form-check-label" for="perm_crear_facturas">Crear Facturas</label>
                                </div>

                                <h6 class="border-bottom pb-2">Gestión de Usuarios</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="perm11" checked>
                                    <label class="form-check-label" for="perm11">Ver Usuarios</label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="perm12" checked>
                                    <label class="form-check-label" for="perm12">Gestionar Roles</label>
                                </div>

                                <button class="btn btn-success">Guardar Permisos</button>
                                <button class="btn btn-secondary" onclick="showView('ver-usuarios')">Volver</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Profesionales con CRUD -->
            <div id="view-ver-profesionales" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Profesionales</h2>
                    <button class="btn btn-success" onclick="showView('insertar-profesional')">
                        <i class="bi bi-plus-circle me-1"></i> Agregar Nuevo Profesional
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchProfesionales" class="form-control" placeholder="Buscar por nombre, apellido o matrícula...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Apellido</th>
                                <th>Matrícula</th>
                                <th>Especialidades</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaProfesionales">
                            <tr>
                                <td>1</td>
                                <td>Carlos</td>
                                <td>García</td>
                                <td>MP-12345</td>
                                <td><span class="badge bg-info">Clínica Médica</span></td>
                                <!-- Agregado botón Ver Detalles -->
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-profesional')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" title="Asignar Especialidad" onclick="showView('asignar-especialidad')">
                                        <i class="bi bi-award"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Laura</td>
                                <td>Martínez</td>
                                <td>MP-67890</td>
                                <td><span class="badge bg-info">Pediatría</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-profesional')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" title="Asignar Especialidad" onclick="showView('asignar-especialidad')">
                                        <i class="bi bi-award"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Roberto</td>
                                <td>Rodríguez</td>
                                <td>MP-11223</td>
                                <td>
                                    <span class="badge bg-info">Cardiología</span>
                                    <span class="badge bg-info">Clínica Médica</span>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-profesional')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" title="Asignar Especialidad" onclick="showView('asignar-especialidad')">
                                        <i class="bi bi-award"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Insertar Profesional -->
            <div id="view-insertar-profesional" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Insertar Profesional</h2>
                    <p class="text-muted">Tabla: PROFESIONALES</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Nombre *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Apellido *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Matrícula *</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ID Usuario (opcional)</label>
                        <input type="number" class="form-control">
                        <small class="text-muted">Vincular con un usuario del sistema</small>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Guardar Profesional</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-profesionales')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Nueva vista: Detalle de Profesional -->
            <div id="view-detalle-profesional" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle del Profesional</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-profesionales')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Profesionales
                    </button>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Información del Profesional</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID Profesional:</strong> 1</p>
                                <p><strong>Nombre:</strong> Carlos García</p>
                                <p><strong>Matrícula:</strong> MP-12345</p>
                                <p><strong>Usuario Asociado:</strong> ID 5</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">Especialidades</h5>
                            </div>
                            <div class="card-body">
                                <span class="badge bg-info me-2">Clínica Médica</span>
                                <hr>
                                <button class="btn btn-warning" onclick="showView('asignar-especialidad')">
                                    <i class="bi bi-award me-1"></i> Asignar Especialidad
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Órdenes de Laboratorio -->
            <div id="view-ver-ordenes" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Órdenes de Laboratorio</h2>
                    <button class="btn btn-success" onclick="showView('crear-orden')">
                        <i class="bi bi-plus-circle me-1"></i> Crear Nueva Orden
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchOrdenes" class="form-control" placeholder="Buscar por paciente, profesional o fecha...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID Orden</th>
                                <th>Paciente</th>
                                <th>Profesional</th>
                                <th>Fecha Solicitud</th>
                                <th>Estado</th>
                                <th>Resultado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaOrdenes">
                            <tr>
                                <td>1</td>
                                <td>Juan Pérez</td>
                                <td>Dr. García</td>
                                <td>2025-01-15</td>
                                <td><span class="badge bg-warning">P - Pendiente</span></td>
                                <td>-</td>
                                <!-- Agregado botón Ver Detalles -->
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-orden')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-success" title="Cargar Resultado">
                                        <i class="bi bi-upload"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>María González</td>
                                <td>Dra. Martínez</td>
                                <td>2025-01-18</td>
                                <td><span class="badge bg-info">E - En Proceso</span></td>
                                <td>-</td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-orden')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-success" title="Cargar Resultado">
                                        <i class="bi bi-upload"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Carlos López</td>
                                <td>Dr. Rodríguez</td>
                                <td>2025-01-10</td>
                                <td><span class="badge bg-success">C - Completado</span></td>
                                <td><a href="#" class="btn btn-sm btn-link">Ver PDF</a></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalles" onclick="showView('detalle-orden')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-success" title="Cargar Resultado">
                                        <i class="bi bi-upload"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Crear Orden de Laboratorio -->
            <div id="view-crear-orden" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Crear Orden de Laboratorio</h2>
                    <p class="text-muted">Tabla: ORDENES_LABORATORIO</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">ID Consulta *</label>
                        <input type="number" class="form-control" required>
                        <small class="text-muted">Consulta asociada a esta orden</small>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ID Paciente *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ID Profesional *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Fecha Solicitud *</label>
                        <input type="date" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Estado *</label>
                        <select class="form-select" required>
                            <option value="">Seleccionar...</option>
                            <option value="P">P - Pendiente</option>
                            <option value="E">E - En Proceso</option>
                            <option value="C">C - Completado</option>
                            <option value="X">X - Cancelado</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">URL Resultado (opcional)</label>
                        <input type="text" class="form-control" placeholder="https://...">
                        <small class="text-muted">Link al PDF o archivo del resultado</small>
                    </div>
                    <div class="col-12">
                        <label class="form-label">Estudios Solicitados</label>
                        <textarea class="form-control" rows="3" placeholder="Ej: Hemograma completo, Glucemia, Colesterol total..."></textarea>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Crear Orden</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-ordenes')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Nueva vista: Detalle de Orden de Laboratorio -->
            <div id="view-detalle-orden" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle de la Orden de Laboratorio</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-ordenes')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Órdenes
                    </button>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Información de la Orden</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID Orden:</strong> 1</p>
                                <p><strong>ID Consulta:</strong> 2</p>
                                <p><strong>Fecha de Solicitud:</strong> 2025-01-20</p>
                                <p><strong>Estado:</strong> <span class="badge bg-warning">P - Pendiente</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">Paciente y Profesional</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>Paciente:</strong> Juan Pérez</p>
                                <p><strong>Documento:</strong> 12345678</p>
                                <p><strong>Profesional:</strong> Dr. Carlos García</p>
                                <p><strong>Matrícula:</strong> MP-12345</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Resultado</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>URL del Resultado:</strong></p>
                                <p class="text-muted">No hay resultado cargado aún</p>
                                <button class="btn btn-success">
                                    <i class="bi bi-upload me-1"></i> Cargar Resultado
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nueva vista: Ver Facturas -->
            <div id="view-ver-facturas" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Facturas</h2>
                    <button class="btn btn-success" onclick="showView('crear-factura')">
                        <i class="bi bi-plus-circle me-1"></i> Crear Nueva Factura
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchFacturas" class="form-control" placeholder="Buscar por paciente, fecha o forma de pago...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID Factura</th>
                                <th>Paciente</th>
                                <th>Fecha</th>
                                <th>Total</th>
                                <th>Forma de Pago</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaFacturas">
                            <tr>
                                <td>1</td>
                                <td>Juan Pérez</td>
                                <td>2025-01-20</td>
                                <td>$15,000.00</td>
                                <td><span class="badge bg-success">EF - Efectivo</span></td>
                                <!-- Cambiado botón Ver Detalle para que lleve a vista separada -->
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalle" onclick="showView('detalle-factura')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-secondary" title="Imprimir">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>María González</td>
                                <td>2025-01-18</td>
                                <td>$8,500.00</td>
                                <td><span class="badge bg-primary">TC - Tarjeta Crédito</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalle" onclick="showView('detalle-factura')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-secondary" title="Imprimir">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Carlos López</td>
                                <td>2025-01-15</td>
                                <td>$22,300.00</td>
                                <td><span class="badge bg-info">TD - Tarjeta Débito</span></td>
                                <td>
                                    <button class="btn btn-sm btn-info" title="Ver Detalle" onclick="showView('detalle-factura')">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-secondary" title="Imprimir">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nueva vista: Crear Factura -->
            <div id="view-crear-factura" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Crear Factura</h2>
                    <p class="text-muted">Tablas: FACTURAS y DETALLE_FACTURA</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">ID Paciente *</label>
                        <input type="number" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Fecha *</label>
                        <input type="date" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Forma de Pago *</label>
                        <select class="form-select" required>
                            <option value="">Seleccionar...</option>
                            <option value="EF">EF - Efectivo</option>
                            <option value="TC">TC - Tarjeta de Crédito</option>
                            <option value="TD">TD - Tarjeta de Débito</option>
                            <option value="TR">TR - Transferencia</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Total *</label>
                        <input type="number" step="0.01" class="form-control" required>
                    </div>

                    <div class="col-12">
                        <hr>
                        <h5>Detalle de la Factura</h5>
                        <p class="text-muted">Agregar conceptos facturados</p>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Concepto</label>
                        <input type="text" class="form-control" placeholder="Ej: Consulta médica">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Cantidad</label>
                        <input type="number" class="form-control" placeholder="1">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Precio Unitario</label>
                        <input type="number" step="0.01" class="form-control" placeholder="0.00">
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button type="button" class="btn btn-secondary w-100">
                            <i class="bi bi-plus"></i> Agregar
                        </button>
                    </div>

                    <div class="col-12">
                        <div class="table-responsive">
                            <table class="table table-sm table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Concepto</th>
                                        <th>Cantidad</th>
                                        <th>Precio Unit.</th>
                                        <th>Subtotal</th>
                                        <th>Acción</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="5" class="text-center text-muted">No hay conceptos agregados</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Crear Factura</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-facturas')">Volver a la Lista</button>
                    </div>
                </form>
            </div>

            <!-- Nueva vista: Detalle de Factura -->
            <div id="view-detalle-factura" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Detalle de la Factura</h2>
                    <button class="btn btn-secondary" onclick="showView('ver-facturas')">
                        <i class="bi bi-arrow-left me-1"></i> Volver a Facturas
                    </button>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">Información de la Factura</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>ID Factura:</strong> 1</p>
                                <p><strong>Fecha:</strong> 2025-01-20</p>
                                <p><strong>Forma de Pago:</strong> <span class="badge bg-success">EF - Efectivo</span></p>
                                <p><strong>Total:</strong> <span class="text-success fs-4">$15,000.00</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-info text-white">
                                <h5 class="mb-0">Paciente</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>Nombre:</strong> Juan Pérez</p>
                                <p><strong>Documento:</strong> 12345678</p>
                                <p><strong>Teléfono:</strong> 3512345678</p>
                                <p><strong>Email:</strong> juan.perez@email.com</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <h5 class="mb-0">Detalle de Conceptos</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-sm table-bordered">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Concepto</th>
                                                <th>Cantidad</th>
                                                <th>Precio Unitario</th>
                                                <th>Subtotal</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Consulta médica</td>
                                                <td>1</td>
                                                <td>$5,000.00</td>
                                                <td>$5,000.00</td>
                                            </tr>
                                            <tr>
                                                <td>Análisis de sangre</td>
                                                <td>1</td>
                                                <td>$8,000.00</td>
                                                <td>$8,000.00</td>
                                            </tr>
                                            <tr>
                                                <td>Medicamentos</td>
                                                <td>1</td>
                                                <td>$2,000.00</td>
                                                <td>$2,000.00</td>
                                            </tr>
                                            <tr class="table-success">
                                                <td colspan="3" class="text-end"><strong>TOTAL:</strong></td>
                                                <td><strong>$15,000.00</strong></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="mt-3">
                                    <button class="btn btn-secondary">
                                        <i class="bi bi-printer me-1"></i> Imprimir Factura
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Agregando vista Ver Especialidades -->
            <div id="view-ver-especialidades" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom d-flex justify-content-between align-items-center">
                    <h2>Especialidades Médicas</h2>
                    <button class="btn btn-success" onclick="showView('insertar-especialidad')">
                        <i class="bi bi-plus-circle me-1"></i> Agregar Nueva Especialidad
                    </button>
                </div>

                <div class="mb-3">
                    <input type="text" id="searchEspecialidades" class="form-control" placeholder="Buscar especialidad...">
                </div>

                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-primary">
                            <tr>
                                <th>ID</th>
                                <th>Especialidad</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaEspecialidades">
                            <tr>
                                <td>1</td>
                                <td>Clínica Médica</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Pediatría</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Cardiología</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Traumatología</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Dermatología</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <button class="btn btn-secondary mt-3" onclick="showView('ver-profesionales')">
                    <i class="bi bi-arrow-left me-1"></i> Volver
                </button>
            </div>

            <!-- Agregando vista Insertar Especialidad -->
            <div id="view-insertar-especialidad" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Insertar Especialidad</h2>
                    <p class="text-muted">Tabla: ESPECIALIDADES</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-12">
                        <label class="form-label">Nombre de la Especialidad *</label>
                        <input type="text" class="form-control" placeholder="Ej: Oftalmología" required>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Guardar Especialidad</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-especialidades')">Volver</button>
                    </div>
                </form>
            </div>

            <!-- Agregando vista Asignar Especialidad -->
            <div id="view-asignar-especialidad" class="content-view" style="display: none;">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <h2>Asignar Especialidades a Profesional</h2>
                    <p class="text-muted">Tabla: ESPECIALIDADES_PROFESIONALES</p>
                </div>

                <form class="row g-3">
                    <div class="col-md-12">
                        <label class="form-label">Seleccionar Profesional *</label>
                        <select class="form-select" required>
                            <option value="">Seleccione un profesional...</option>
                            <option value="1">Dr. Carlos García - MP-12345</option>
                            <option value="2">Dra. Laura Martínez - MP-67890</option>
                            <option value="3">Dr. Roberto Rodríguez - MP-11223</option>
                        </select>
                    </div>

                    <div class="col-md-12">
                        <label class="form-label">Especialidades Disponibles</label>
                        <div class="card">
                            <div class="card-body" style="max-height: 400px; overflow-y: auto;">
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="esp1" value="1">
                                    <label class="form-check-label" for="esp1">Clínica Médica</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="esp2" value="2">
                                    <label class="form-check-label" for="esp2">Pediatría</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="esp3" value="3">
                                    <label class="form-check-label" for="esp3">Cardiología</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="esp4" value="4">
                                    <label class="form-check-label" for="esp4">Traumatología</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="esp5" value="5">
                                    <label class="form-check-label" for="esp5">Dermatología</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="esp6" value="6">
                                    <label class="form-check-label" for="esp6">Ginecología</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="esp7" value="7">
                                    <label class="form-check-label" for="esp7">Oftalmología</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="esp8" value="8">
                                    <label class="form-check-label" for="esp8">Otorrinolaringología</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Asignar Especialidades</button>
                        <button type="button" class="btn btn-secondary" onclick="showView('ver-profesionales')">Volver</button>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <!-- Botón flotante para cambiar tema -->
    <button class="theme-toggle-btn" onclick="toggleThemeMenu()">
        <i class="bi bi-gear-fill"></i>
    </button>

    <!-- Menú de selección de tema -->
    <div class="theme-menu" id="themeMenu">
        <div class="d-grid gap-2">
            <button class="btn btn-light btn-sm" onclick="setTheme('light')">
                <i class="bi bi-sun-fill me-1"></i> Tema Claro
            </button>
            <button class="btn btn-dark btn-sm" onclick="setTheme('dark')">
                <i class="bi bi-moon-fill me-1"></i> Tema Oscuro
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Agregando scripts de Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script src="js/supabase-config.js"></script>
    <script src="js/supabase-auth.js"></script>
    <script src="js/supabase-pacientes.js"></script>
    <script src="js/supabase-turnos.js"></script>
    <script src="js/supabase-consultas.js"></script>
    <script src="js/supabase-profesionales.js"></script>
    <script src="js/supabase-farmacia.js"></script>
    <script src="js/main-integration.js"></script>
    
    <script src="script.js"></script>
</body>
</html>
